<head>
  <title>Ethercoaster</title>
</head>

<body>
  {{> main}}
</body>

<template name="edit">
  <div class="container">
    <h1>Editing Coaster <em>{{shortname}}</em></h1>
    <form class="edit">
      <fieldset>
        <label>URL</label>
        <input type="text" name="url" value="{{url}}">
        <span class="help-block">The Etherpad that this coaster currently points to. Last saved value is <strong>{{url}}</strong>.</span>
        <label>Description</label>
        <input type="text" name="description" value="{{description}}">
        <span class="help-block">Brief description of what the Etherpad pointed at by this coaster is for. Last saved value is <strong>{{description}}</strong>.</span>
        <button type="submit" class="btn">Save Changes</button>
      </fieldset>
    </form>
    <a href="/{{shortname}}" class="btn">Visit Coaster</a>
    <button id="destroy-coaster" class="btn btn-danger">Destroy Coaster</button>  
  </div>
</template>

<template name="show">
  <iframe src="{{url}}" class="etherpad"></iframe>
</template>

<template name="home">
  <div class="container">
    <h1>Ethercoasters</h1>
    <table class="table">
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    {{#each etherpads}}
      <tr>
        <td><a href="/{{shortname}}">{{shortname}}</a></td>
        <td>{{description}}</td>
      </tr>
    {{/each}}
    </table>
  </div>
</template>

<template name="main">
  {{#if isHomepage}}
    {{> home}}
  {{else}}
    {{#if etherpad}}
      {{#each etherpads}}
        {{#if isEditing}}
          {{> edit}}
        {{else}}
          {{> show}}
        {{/if}}
      {{/each}}
    {{else}}
      <p>The coaster <strong>{{etherpadId}}</strong> does not exist.</p>
      {{#if isEditing}}
        <button id="create-coaster" class="btn btn-primary">Create Coaster</button>
      {{/if}}
    {{/if}}
  {{/if}}
</template>
